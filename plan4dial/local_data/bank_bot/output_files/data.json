{
    "name": "bank-bot",
    "context_variables": {
        "task": {
            "type": "enum",
            "config": {
                "transfer funds between accounts": {
                    "variations": [
                        "transfer funds",
                        "move money over",
                        "transfer between accounts",
                        "transfer money over to another account"
                    ]
                }
            },
            "known": {
                "type": "flag",
                "init": false
            }
        },
        "account1": {
            "type": "enum",
            "config": [
                "chequing",
                "savings",
                "retirement fund",
                "college fund"
            ],
            "known": {
                "type": "flag",
                "init": false
            }
        },
        "account2": {
            "type": "enum",
            "config": [
                "chequing",
                "savings",
                "retirement fund",
                "college fund"
            ],
            "known": {
                "type": "flag",
                "init": false
            }
        },
        "funds": {
            "type": "json",
            "config": {
                "extraction": {
                    "method": "regex",
                    "pattern": "\\d"
                }
            },
            "known": {
                "type": "flag",
                "init": false
            }
        },
        "goal": {
            "type": "flag",
            "config": false,
            "known": {
                "type": "flag",
                "init": false
            }
        },
        "have-message": {
            "type": "flag",
            "config": false
        },
        "force-statement": {
            "type": "flag",
            "config": false
        },
        "allow_single_slot_funds": {
            "type": "flag",
            "config": false
        },
        "allow_single_slot_account2": {
            "type": "flag",
            "config": false
        },
        "allow_single_slot_account1": {
            "type": "flag",
            "config": false
        },
        "task-value-transfer_funds_between_accounts": {
            "type": "flag",
            "config": false
        }
    },
    "intents": {
        "confirm": {
            "entities": [],
            "utterances": [
                "yes",
                "yeah",
                "that's it",
                "Y",
                "mhm",
                "confirm",
                "yes please"
            ],
            "type": "regular"
        },
        "deny": {
            "entities": [],
            "utterances": [
                "no",
                "not at all",
                "that's not what i meant",
                "absolutely not",
                "i don't want that",
                "nah",
                "no thanks",
                "no thank you"
            ],
            "type": "regular"
        },
        "share_task": {
            "entities": [
                "$task"
            ],
            "utterances": [
                "I want to $task.",
                "I just want to $task today.",
                "Can you help me $task?"
            ],
            "type": "regular"
        },
        "share_transfer_settings": {
            "entities": [
                "$account1",
                "$account2"
            ],
            "utterances": [
                "I want to transfer funds from $account1 to $account2.",
                "Can I transfer money from $account1 to $account2?",
                "I want to send money to $account2 from $account1.",
                "I want to send funds to $account2 from $account1."
            ],
            "type": "regular"
        },
        "share_transfer_funds": {
            "entities": [
                "$funds"
            ],
            "utterances": [
                "I want to transfer $funds.",
                "I want to send $funds",
                "$funds"
            ],
            "type": "regular"
        },
        "share_acc_1": {
            "entities": [
                "$account1"
            ],
            "utterances": [
                "Please transfer from $account1.",
                "I want to send from $account1.",
                "$account1"
            ],
            "type": "regular"
        },
        "share_acc_2": {
            "entities": [
                "$account2"
            ],
            "utterances": [
                "Please transfer from $account2.",
                "I want to send from $account2.",
                "$account2"
            ],
            "type": "regular"
        },
        "fallback": {
            "entities": [],
            "utterances": [],
            "type": "fallback"
        },
        "utter_ds": {
            "entities": [],
            "utterances": [],
            "type": "regular"
        }
    },
    "actions": {
        "confirm-transfer": {
            "type": "dialogue",
            "condition": [
                [
                    "funds",
                    "Known"
                ],
                [
                    "force-statement",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "confirm-transfer__set-allergy",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "account1": {
                                "variable": "account1",
                                "certainty": "Unknown",
                                "value": null,
                                "interpretation": "json"
                            },
                            "account2": {
                                "variable": "account2",
                                "certainty": "Unknown",
                                "value": null,
                                "interpretation": "json"
                            },
                            "funds": {
                                "variable": "funds",
                                "certainty": "Known",
                                "value": null,
                                "interpretation": "json"
                            },
                            "goal": {
                                "value": true,
                                "variable": "goal",
                                "interpretation": "json"
                            },
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "response_variants": [
                            "Transferring funds from $account1 to $account2..."
                        ],
                        "name": "confirm-transfer_DETDUP_confirm-transfer__set-allergy-EQ-complete-transfer",
                        "intent": null,
                        "assignments": {
                            "$account1": "didnt-find",
                            "$account2": "didnt-find",
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "confirm-transfer_DETDUP_confirm-transfer__set-allergy-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "fallback_message_variants": [
                "Sorry, I couldn't understand that input.",
                "Sorry, I didn't quite get that."
            ],
            "intents": {
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "dialogue_statement": {
            "type": "dialogue",
            "condition": [
                [
                    "have-message",
                    true
                ],
                [
                    "force-statement",
                    true
                ]
            ],
            "effect": {
                "global-outcome-name": "dialogue_statement__reset",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "have-message": {
                                "value": false,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": false,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "utter_ds",
                        "name": "dialogue_statement_DETDUP_dialogue_statement__reset-EQ-lock",
                        "assignments": {}
                    }
                ]
            },
            "message_variants": [],
            "intents": {
                "utter_ds": {
                    "entities": [],
                    "utterances": [],
                    "type": "regular"
                }
            }
        },
        "slot-fill__get-task": {
            "type": "dialogue",
            "message_variants": [
                "What would you like to do next? Your options are`:`\\ntransfer funds between accounts\\ne-transfer\\nrequest money\\npay bills\\ncancel card"
            ],
            "fallback_message_variants": [
                "Sorry, that isn't a valid banking option."
            ],
            "condition": [
                [
                    "task",
                    null
                ],
                [
                    "task",
                    "Unknown"
                ],
                [
                    "force-statement",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "slot-fill__get-task__validate-slot-fill",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "task": {
                                "value": "$task",
                                "variable": "task",
                                "certainty": "Known",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_task",
                        "name": "slot-fill__get-task_DETDUP_slot-fill__get-task__validate-slot-fill-EQ-task_found",
                        "assignments": {
                            "$task": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "slot-fill__get-task_DETDUP_slot-fill__get-task__validate-slot-fill-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "intents": {
                "share_task": {
                    "entities": [
                        "$task"
                    ],
                    "utterances": [
                        "I want to $task.",
                        "I just want to $task today.",
                        "Can you help me $task?"
                    ],
                    "type": "regular"
                },
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "slot-fill__get-transfer-settings": {
            "type": "dialogue",
            "message_variants": [
                "Which accounts do you want to transfer funds between, and how much?",
                "Which accounts do you want to send money to and from, and how much?",
                "Please enter the accounts you want to transfer money between and the amount of money you wish to send."
            ],
            "fallback_message_variants": [
                "Sorry, that isn't a valid transfer option."
            ],
            "condition": [
                [
                    "account1",
                    null
                ],
                [
                    "account1",
                    "Unknown"
                ],
                [
                    "account2",
                    null
                ],
                [
                    "account2",
                    "Unknown"
                ],
                [
                    "funds",
                    null
                ],
                [
                    "funds",
                    "Unknown"
                ],
                [
                    "task",
                    "Known"
                ],
                [
                    "force-statement",
                    false
                ],
                [
                    "task-value-transfer_funds_between_accounts",
                    true
                ]
            ],
            "effect": {
                "global-outcome-name": "slot-fill__get-transfer-settings__validate-slot-fill",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "account1": {
                                "value": "$account1",
                                "variable": "account1",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "account2": {
                                "value": "$account2",
                                "variable": "account2",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "funds": {
                                "value": "$funds",
                                "variable": "funds",
                                "certainty": "Known",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_transfer_settings",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account1_found-account2_found-funds_found",
                        "assignments": {
                            "$account1": "found",
                            "$account2": "found",
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "account1": {
                                "value": "$account1",
                                "variable": "account1",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "account2": {
                                "value": "$account2",
                                "variable": "account2",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_funds": {
                                "value": true,
                                "variable": "allow_single_slot_funds",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_transfer_settings",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account1_found-account2_found",
                        "assignments": {
                            "$account1": "found",
                            "$account2": "found"
                        }
                    },
                    {
                        "updates": {
                            "account1": {
                                "value": "$account1",
                                "variable": "account1",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "funds": {
                                "value": "$funds",
                                "variable": "funds",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account2": {
                                "value": true,
                                "variable": "allow_single_slot_account2",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_transfer_settings",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account1_found-funds_found",
                        "assignments": {
                            "$account1": "found",
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "account1": {
                                "value": "$account1",
                                "variable": "account1",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account2": {
                                "value": true,
                                "variable": "allow_single_slot_account2",
                                "interpretation": "json"
                            },
                            "allow_single_slot_funds": {
                                "value": true,
                                "variable": "allow_single_slot_funds",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_acc_1",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account1_found",
                        "assignments": {
                            "$account1": "found"
                        }
                    },
                    {
                        "updates": {
                            "account2": {
                                "value": "$account2",
                                "variable": "account2",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "funds": {
                                "value": "$funds",
                                "variable": "funds",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account1": {
                                "value": true,
                                "variable": "allow_single_slot_account1",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_transfer_settings",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account2_found-funds_found",
                        "assignments": {
                            "$account2": "found",
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "account2": {
                                "value": "$account2",
                                "variable": "account2",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account1": {
                                "value": true,
                                "variable": "allow_single_slot_account1",
                                "interpretation": "json"
                            },
                            "allow_single_slot_funds": {
                                "value": true,
                                "variable": "allow_single_slot_funds",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_acc_2",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-account2_found",
                        "assignments": {
                            "$account2": "found"
                        }
                    },
                    {
                        "updates": {
                            "funds": {
                                "value": "$funds",
                                "variable": "funds",
                                "certainty": "Known",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account1": {
                                "value": true,
                                "variable": "allow_single_slot_account1",
                                "interpretation": "json"
                            },
                            "allow_single_slot_account2": {
                                "value": true,
                                "variable": "allow_single_slot_account2",
                                "interpretation": "json"
                            }
                        },
                        "intent": "share_funds",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-funds_found",
                        "assignments": {
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "slot-fill__get-transfer-settings_DETDUP_slot-fill__get-transfer-settings__validate-slot-fill-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "intents": {
                "share_transfer_settings": {
                    "entities": [
                        "$account1",
                        "$account2"
                    ],
                    "utterances": [
                        "I want to transfer funds from $account1 to $account2.",
                        "Can I transfer money from $account1 to $account2?",
                        "I want to send money to $account2 from $account1.",
                        "I want to send funds to $account2 from $account1."
                    ],
                    "type": "regular"
                },
                "share_acc_1": {
                    "entities": [
                        "$account1"
                    ],
                    "utterances": [
                        "Please transfer from $account1.",
                        "I want to send from $account1.",
                        "$account1"
                    ],
                    "type": "regular"
                },
                "share_acc_2": {
                    "entities": [
                        "$account2"
                    ],
                    "utterances": [
                        "Please transfer from $account2.",
                        "I want to send from $account2.",
                        "$account2"
                    ],
                    "type": "regular"
                },
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "single_slot__funds": {
            "type": "dialogue",
            "message_variants": [
                "How much money do you want to transfer?"
            ],
            "condition": [
                [
                    "funds",
                    "Unknown"
                ],
                [
                    "allow_single_slot_funds",
                    true
                ],
                [
                    "force-statement",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "single_slot__funds__validate-slot-fill",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "funds": {
                                "value": "$funds",
                                "variable": "funds",
                                "certainty": "Known",
                                "interpretation": "json"
                            }
                        },
                        "allow_single_slot_funds": {
                            "value": false
                        },
                        "intent": "share_funds",
                        "name": "single_slot__funds_DETDUP_single_slot__funds__validate-slot-fill-EQ-fill-slot",
                        "assignments": {
                            "$funds": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "single_slot__funds_DETDUP_single_slot__funds__validate-slot-fill-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "fallback_message_variants": [
                "Sorry, that isn't a valid amount of money."
            ],
            "intents": {
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "single_slot__account2": {
            "type": "dialogue",
            "message_variants": [
                "What account do you want to want to transfer to?"
            ],
            "condition": [
                [
                    "account2",
                    "Unknown"
                ],
                [
                    "allow_single_slot_account2",
                    true
                ],
                [
                    "force-statement",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "single_slot__account2__validate-slot-fill",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "account2": {
                                "value": "$account2",
                                "variable": "account2",
                                "certainty": "Known",
                                "interpretation": "json"
                            }
                        },
                        "allow_single_slot_account2": {
                            "value": false
                        },
                        "intent": "share_acc_2",
                        "name": "single_slot__account2_DETDUP_single_slot__account2__validate-slot-fill-EQ-fill-slot",
                        "assignments": {
                            "$account2": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "single_slot__account2_DETDUP_single_slot__account2__validate-slot-fill-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "fallback_message_variants": [
                "Sorry, that isn't a valid account type."
            ],
            "intents": {
                "share_acc_2": {
                    "entities": [
                        "$account2"
                    ],
                    "utterances": [
                        "Please transfer from $account2.",
                        "I want to send from $account2.",
                        "$account2"
                    ],
                    "type": "regular"
                },
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "single_slot__account1": {
            "type": "dialogue",
            "message_variants": [
                "What account type do you want to transfer from?"
            ],
            "condition": [
                [
                    "account1",
                    "Unknown"
                ],
                [
                    "allow_single_slot_account1",
                    true
                ],
                [
                    "force-statement",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "single_slot__account1__validate-slot-fill",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "account1": {
                                "value": "$account1",
                                "variable": "account1",
                                "certainty": "Known",
                                "interpretation": "json"
                            }
                        },
                        "allow_single_slot_account1": {
                            "value": false
                        },
                        "intent": "share_acc_1",
                        "name": "single_slot__account1_DETDUP_single_slot__account1__validate-slot-fill-EQ-fill-slot",
                        "assignments": {
                            "$account1": "found"
                        }
                    },
                    {
                        "updates": {
                            "have-message": {
                                "value": true,
                                "variable": "have-message",
                                "interpretation": "json"
                            },
                            "force-statement": {
                                "value": true,
                                "variable": "force-statement",
                                "interpretation": "json"
                            }
                        },
                        "intent": "fallback",
                        "name": "single_slot__account1_DETDUP_single_slot__account1__validate-slot-fill-EQ-fallback",
                        "assignments": {}
                    }
                ]
            },
            "fallback_message_variants": [
                "Sorry, that isn't a valid account type."
            ],
            "intents": {
                "share_acc_1": {
                    "entities": [
                        "$account1"
                    ],
                    "utterances": [
                        "Please transfer from $account1.",
                        "I want to send from $account1.",
                        "$account1"
                    ],
                    "type": "regular"
                },
                "fallback": {
                    "entities": [],
                    "utterances": [],
                    "type": "fallback"
                }
            }
        },
        "set-task": {
            "type": "system",
            "subtype": "Context dependent determination",
            "condition": [
                [
                    "task",
                    "Known"
                ],
                [
                    "task-value-transfer_funds_between_accounts",
                    false
                ]
            ],
            "effect": {
                "global-outcome-name": "set-task__set-valid-value",
                "type": "oneof",
                "outcomes": [
                    {
                        "updates": {
                            "task-value-transfer_funds_between_accounts": {
                                "value": true,
                                "variable": "task-value-transfer_funds_between_accounts",
                                "interpretation": "json"
                            }
                        },
                        "context": {
                            "task": {
                                "value": "transfer funds between accounts"
                            }
                        },
                        "name": "set-task_DETDUP_set-task__set-valid-value-EQ-transfer_funds_between_accounts",
                        "intent": null,
                        "assignments": {}
                    }
                ]
            }
        }
    }
}