<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; Plan4Dial 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="plan4dial.main" href="generated/plan4dial.main.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Plan4Dial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="generated/plan4dial.html">plan4dial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-steps">Usage Steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-yaml-config-file-that-defines-your-bot">Create a YAML config file that defines your bot.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#define-the-context-variables">1. Define the Context Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-the-intents">2. Define the Intents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-the-actions">3. Define the Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-the-bot-with-hovor">Deploy the bot with HOVOR.</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Plan4Dial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading"></a></h1>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p><strong>Note: Currently, Plan4Dial only supports Linux/WSL due to the restrictions on the RBP planner.</strong></p>
<div class="line-block">
<div class="line">For ease of use and reducing the chance of import or versioning errors, it is recommended that you use a virtual environment such as <code class="docutils literal notranslate"><span class="pre">venv</span></code>.</div>
<div class="line">Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code> to install the necessary libraries before using.</div>
<div class="line">Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">spacy</span> <span class="pre">download</span> <span class="pre">en_core_web_md</span></code> to download the appropriate Spacy model. This is used for NLU along with Rasa.</div>
</div>
</section>
<section id="usage-steps">
<h2>Usage Steps<a class="headerlink" href="#usage-steps" title="Permalink to this heading"></a></h2>
<section id="create-a-yaml-config-file-that-defines-your-bot">
<h3>Create a YAML config file that defines your bot.<a class="headerlink" href="#create-a-yaml-config-file-that-defines-your-bot" title="Permalink to this heading"></a></h3>
<p>Let’s go through an example. Suppose we want to create a chatbot that helps you decide what to do on your day off. This will be a fairly simple bot that picks a restaurant and outing location based on the user’s preferences.</p>
<p>(For later reference, the full YAML file as well as the output files can be found <a class="reference external" href="https://github.com/QuMuLab/plan4dial/tree/main/plan4dial/local_data/gold_standard_bot">here</a>).</p>
<p>First, create a YAML file and pick a name for the domain:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nn">---</span><span class="w"></span>
<span class="linenos">2</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">day-planner</span><span class="w"></span>
</pre></div>
</div>
<p>There are three main parts to the YAML file you will need to define.
They are <code class="docutils literal notranslate"><span class="pre">context</span> <span class="pre">variables</span></code>, <code class="docutils literal notranslate"><span class="pre">intents</span></code>, and <code class="docutils literal notranslate"><span class="pre">actions</span></code>. We will examine each of these in turn.</p>
<section id="define-the-context-variables">
<h4>1. Define the Context Variables<a class="headerlink" href="#define-the-context-variables" title="Permalink to this heading"></a></h4>
<p>Context variables are variables that your bot will store throughout the course of the conversation to keep track of the context gathered so far.
Without context variables, the bot would not be able to store information from one line of dialogue to the next.</p>
<p>One of the most common use cases of context variables is to store information gathered from the user. However, they can also be used internally to keep track of states in the conversation, the most common example being an indication of when the “goal” is reached.</p>
<p>In this case, we know we want to keep track of the user’s preferences, which include options for location, cuisine, allergy/food restrictions, budget, and outing type.
Let’s examine the context variables for location, cuisine, and food restrictions first.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 3</span><span class="w">   </span><span class="nt">context_variables</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">     </span><span class="c1"># user&#39;s location</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">     </span><span class="nt">location</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">       </span><span class="nt">extraction</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">         </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spacy</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">         </span><span class="nt">config_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpe</span><span class="w"></span>
<span class="linenos">10</span><span class="w">       </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos">11</span><span class="w">         </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span><span class="w"></span>
<span class="linenos">12</span><span class="w">         </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">13</span><span class="w">     </span><span class="c1"># user&#39;s preferred cuisine; must map to one of the 4 options</span><span class="w"></span>
<span class="linenos">14</span><span class="w">     </span><span class="nt">cuisine</span><span class="p">:</span><span class="w"></span>
<span class="linenos">15</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos">16</span><span class="w">       </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos">17</span><span class="w">         </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span><span class="w"></span>
<span class="linenos">18</span><span class="w">         </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">19</span><span class="w">       </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos">20</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mexican</span><span class="w"></span>
<span class="linenos">21</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Italian</span><span class="w"></span>
<span class="linenos">22</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Chinese</span><span class="w"></span>
<span class="linenos">23</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dessert</span><span class="w"></span>
<span class="linenos">24</span><span class="w">     </span><span class="c1"># indicates if the user has an allergy</span><span class="w"></span>
<span class="linenos">25</span><span class="w">     </span><span class="nt">have_allergy</span><span class="p">:</span><span class="w"></span>
<span class="linenos">26</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos">27</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">28</span><span class="w">       </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos">29</span><span class="w">         </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos">30</span><span class="w">         </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">31</span><span class="w">     </span><span class="c1"># food restrictions/allergies that the bot can take into account</span><span class="w"></span>
<span class="linenos">32</span><span class="w">     </span><span class="nt">food_restriction</span><span class="p">:</span><span class="w"></span>
<span class="linenos">33</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos">34</span><span class="w">       </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos">35</span><span class="w">         </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos">36</span><span class="w">         </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos">37</span><span class="w">       </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos">38</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dairy-free</span><span class="w"></span>
<span class="linenos">39</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gluten-free</span><span class="w"></span>
</pre></div>
</div>
<p>We can see that each context variable has been assigned a type: <code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">enum</span></code>, and <code class="docutils literal notranslate"><span class="pre">flag</span></code> respectively. We can also see that another type, <code class="docutils literal notranslate"><span class="pre">fflag</span></code>, exists under the <code class="docutils literal notranslate"><span class="pre">known</span></code> section of <em>cuisine</em> (more on this later).</p>
<p>These are the only <strong>four</strong> types that we can define in the YAML. They are defined as follows:</p>
<table class="docutils align-default" id="types">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flag</p></td>
<td><p>A boolean value; can only be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>fflag</p></td>
<td><p>“Fuzzy flag”; can only be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, or <code class="docutils literal notranslate"><span class="pre">maybe</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>enum</p></td>
<td><p>Can only be set to the values set under the <code class="docutils literal notranslate"><span class="pre">options</span></code> list.</p></td>
</tr>
<tr class="row-odd"><td><p>json</p></td>
<td><p>Used if you want to use an alternate extraction method,
i.e. Spacy GPE.</p>
<p><strong>NOTE</strong>: Currently, only Spacy is compatible with this
option.</p>
</td>
</tr>
</tbody>
</table>
<p>So, “location” is of type <code class="docutils literal notranslate"><span class="pre">json</span></code> because we want to use <a class="reference external" href="https://spacy.io/usage/spacy-101#annotations-ner">Spacy GPE</a> for location extraction. (In the case of location, it makes the most sense to use a model finely tuned to detect location, instead of Rasa, which is trained only on the examples you provide).
You can see that under <code class="docutils literal notranslate"><span class="pre">extraction</span></code>, we specified both the method <code class="docutils literal notranslate"><span class="pre">spacy</span></code> and the configuration for NER (named entity recognition), in this case <cite>gpe</cite> for location.</p>
<p><em>cuisine</em> is of type <code class="docutils literal notranslate"><span class="pre">enum</span></code> because we only want it to have 4 valid values: <em>Mexican</em>, <em>Italian</em>, <em>Chinese</em>, and <em>dessert</em>. <em>food_restriction</em> is of type <code class="docutils literal notranslate"><span class="pre">enum</span></code> for the same reason.</p>
<p><em>have_allergy</em>, which determines if the user has an allergy (in which case we need to get their <em>food_restriction</em>), is of type <code class="docutils literal notranslate"><span class="pre">flag</span></code>. That is, they either do or don’t have an allergy. For this variable, you can also see that it has an <code class="docutils literal notranslate"><span class="pre">init</span></code> option. This is only available to <code class="docutils literal notranslate"><span class="pre">flag</span></code> or <code class="docutils literal notranslate"><span class="pre">fflag</span></code> type variables, and it allows you to set an initial value for the variable and change the initial state of the conversation. In this case, we default the variable to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p id="known">Each variable also has a <code class="docutils literal notranslate"><span class="pre">known</span></code> option which determines the knowledge we have about the variable. The <code class="docutils literal notranslate"><span class="pre">known</span></code> <code class="docutils literal notranslate"><span class="pre">type</span></code> can only be set to either <code class="docutils literal notranslate"><span class="pre">flag</span></code> or <code class="docutils literal notranslate"><span class="pre">fflag</span></code>, and functions in the same way. This parameter is extermely important as conversation navigation is often predicated on what context we know, maybe know, or don’t know so far.</p>
<p>In most cases, the <code class="docutils literal notranslate"><span class="pre">known</span></code>’s <code class="docutils literal notranslate"><span class="pre">init</span></code> setting is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, but the <code class="docutils literal notranslate"><span class="pre">type</span></code> setting depends on what makes the most sense for the variable. Often in the case of <code class="docutils literal notranslate"><span class="pre">enum</span></code> type variables like <em>cuisine</em>, it makes the most sense to allow for a little variance in user input. They may something that somewhat resembles one of the available options, and it is helpful to store their answer, classify it as “maybe known”, and clarify the user’s intention.
For simpler variables like <em>have_allergy</em>, a <code class="docutils literal notranslate"><span class="pre">known</span></code> <code class="docutils literal notranslate"><span class="pre">type</span></code> setting of <code class="docutils literal notranslate"><span class="pre">flag</span></code> should suffice.</p>
<p>With this in mind, let’s add the rest of the context variables.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 40</span><span class="w">   </span><span class="c1"># possible budget options</span><span class="w"></span>
<span class="linenos"> 41</span><span class="w">   </span><span class="nt">budget</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 42</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos"> 43</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 44</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 45</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 46</span><span class="w">     </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 47</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">low</span><span class="w"></span>
<span class="linenos"> 48</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">high</span><span class="w"></span>
<span class="linenos"> 49</span><span class="w">   </span><span class="c1"># user&#39;s outing preferences</span><span class="w"></span>
<span class="linenos"> 50</span><span class="w">   </span><span class="nt">outing_type</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 51</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos"> 52</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 53</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span><span class="w"></span>
<span class="linenos"> 54</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 55</span><span class="w">     </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 56</span><span class="w">       </span><span class="nt">high-energy</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 57</span><span class="w">         </span><span class="nt">variations</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 58</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fun</span><span class="w"></span>
<span class="linenos"> 59</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exciting</span><span class="w"></span>
<span class="linenos"> 60</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">social</span><span class="w"></span>
<span class="linenos"> 61</span><span class="w">       </span><span class="nt">low-energy</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 62</span><span class="w">         </span><span class="nt">variations</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 63</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chill</span><span class="w"></span>
<span class="linenos"> 64</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relaxing</span><span class="w"></span>
<span class="linenos"> 65</span><span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">laid-back</span><span class="w"></span>
<span class="linenos"> 66</span><span class="w">   </span><span class="c1"># activated if there is a conflict between the user&#39;s cuisine preference and food restrictions</span><span class="w"></span>
<span class="linenos"> 67</span><span class="w">   </span><span class="nt">conflict</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 68</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 69</span><span class="w">     </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 70</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 71</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 72</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 73</span><span class="w">   </span><span class="c1"># possible restaurant options</span><span class="w"></span>
<span class="linenos"> 74</span><span class="w">   </span><span class="nt">restaurant</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 75</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos"> 76</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 77</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 78</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 79</span><span class="w">     </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 80</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Guac Grill</span><span class="w"></span>
<span class="linenos"> 81</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Alfredo&#39;s Pizza Café</span><span class="w"></span>
<span class="linenos"> 82</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mandarin</span><span class="w"></span>
<span class="linenos"> 83</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Geneva Crepes</span><span class="w"></span>
<span class="linenos"> 84</span><span class="w">   </span><span class="c1"># possible outing options</span><span class="w"></span>
<span class="linenos"> 85</span><span class="w">   </span><span class="nt">outing</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 86</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w"></span>
<span class="linenos"> 87</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 88</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 89</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 90</span><span class="w">     </span><span class="nt">options</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 91</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stages</span><span class="w"></span>
<span class="linenos"> 92</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stauffer Library</span><span class="w"></span>
<span class="linenos"> 93</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Broadway Theater</span><span class="w"></span>
<span class="linenos"> 94</span><span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Smith&#39;s Golfing Club</span><span class="w"></span>
<span class="linenos"> 95</span><span class="w">   </span><span class="c1"># ends the conversation if true</span><span class="w"></span>
<span class="linenos"> 96</span><span class="w">   </span><span class="nt">goal</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 97</span><span class="w">     </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos"> 98</span><span class="w">     </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="linenos"> 99</span><span class="w">     </span><span class="nt">known</span><span class="p">:</span><span class="w"></span>
<span class="linenos">100</span><span class="w">       </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span><span class="w"></span>
<span class="linenos">101</span><span class="w">       </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
</pre></div>
</div>
<p>While most of this you’ve already seen, let’s draw attention to a couple things.</p>
<p>In <em>outing_type</em>, we’ve supplied some <code class="docutils literal notranslate"><span class="pre">variations</span></code> under the <code class="docutils literal notranslate"><span class="pre">options</span></code> the user can provide.
These indicate that if the user utters any of the variations, the bot will <strong>map the user’s utterance back to the original option</strong>.
While I’ve only given a few examples for simplicity, it is extremely important to supply lots of training examples to make your model more robust.
There is an exception to this rule, though. In the case of <em>outing</em>, although the variable is of <code class="docutils literal notranslate"><span class="pre">type</span></code> <code class="docutils literal notranslate"><span class="pre">enum</span></code>, the variable value will be set internally based on the user’s preferences instead of through directly analyzing the user’s input.
Since this will be completely in the control of the bot designer and not reliant on the NLU, no variations need to be provided there.</p>
<p>Also, a <code class="docutils literal notranslate"><span class="pre">flag</span></code> <em>goal</em> variable is mandatory for every bot as it determines when the conversation ends (more on this later).</p>
<p>You’re all set to define context variables for your bot! Let’s move on to the next step: intents.</p>
</section>
<section id="define-the-intents">
<h4>2. Define the Intents<a class="headerlink" href="#define-the-intents" title="Permalink to this heading"></a></h4>
<p>The next step is to define the intents.
Intents are characterizations of what the user is trying to say. For example, if the user says “yes”, then their intent is to “confirm” the bot’s statement.
Intents are parsed/analyzed using Rasa NLU.
They are important as we need to be able to map arbitrary user input to tangible results that determines where to go next in the conversation.
<strong>NOTE</strong>: We do not use Rasa for anything other than off-the-shelf NLU (more information can be found <a class="reference internal" href="index.html#why"><span class="std std-ref">here</span></a>).</p>
<p>An intent is made up these parts:</p>
<p>1. <strong>utterances</strong>: Examples of utterances that constitute that intent.
Similar to context variable <code class="docutils literal notranslate"><span class="pre">variations</span></code>, it is best to supply as many of these as you can, as these will be passed off to Rasa as training examples.
Ideally, you shouldn’t have intents with utterances that are too similar to one another, as this will make it harder for the model to pinpoint what the user wants.</p>
<p>2. <strong>entities</strong>: (Optional) Any entities that are extracted with this intent.
Entities are variables that are extracted from the user.
Within the intent, each entity must be preceded with a <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol to indicate the location of the entity in the utterance.</p>
<p>Let’s see what the intents for our <code class="docutils literal notranslate"><span class="pre">day-planner</span></code> bot look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos">102</span><span class="w">   </span><span class="nt">intents</span><span class="p">:</span><span class="w"></span>
<span class="linenos">103</span><span class="w">     </span><span class="nt">confirm</span><span class="p">:</span><span class="w"></span>
<span class="linenos">104</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">105</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;yes&quot;</span><span class="w"></span>
<span class="linenos">106</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yeah</span><span class="w"></span>
<span class="linenos">107</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">that&#39;s it</span><span class="w"></span>
<span class="linenos">108</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="w"></span>
<span class="linenos">109</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mhm</span><span class="w"></span>
<span class="linenos">110</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confirm</span><span class="w"></span>
<span class="linenos">111</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes please</span><span class="w"></span>
<span class="linenos">112</span><span class="w">     </span><span class="nt">deny</span><span class="p">:</span><span class="w"></span>
<span class="linenos">113</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">114</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;no&quot;</span><span class="w"></span>
<span class="linenos">115</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not at all</span><span class="w"></span>
<span class="linenos">116</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">that&#39;s not what i meant</span><span class="w"></span>
<span class="linenos">117</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absolutely not</span><span class="w"></span>
<span class="linenos">118</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">i don&#39;t want that</span><span class="w"></span>
<span class="linenos">119</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nah</span><span class="w"></span>
<span class="linenos">120</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no thanks</span><span class="w"></span>
<span class="linenos">121</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no thank you</span><span class="w"></span>
<span class="linenos">122</span><span class="w">     </span><span class="nt">share_location</span><span class="p">:</span><span class="w"></span>
<span class="linenos">123</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">124</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">location</span><span class="w"></span>
<span class="linenos">125</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">126</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I live in $location.</span><span class="w"></span>
<span class="linenos">127</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am located in $location.</span><span class="w"></span>
<span class="linenos">128</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Can you help me find things to do in $location?</span><span class="w"></span>
<span class="linenos">129</span><span class="w">     </span><span class="nt">share_cuisine</span><span class="p">:</span><span class="w"></span>
<span class="linenos">130</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">131</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cuisine</span><span class="w"></span>
<span class="linenos">132</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">133</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I want to eat $cuisine.</span><span class="w"></span>
<span class="linenos">134</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Do you have restaurants of type $cuisine?</span><span class="w"></span>
<span class="linenos">135</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Are there any $cuisine restaurants in the area?</span><span class="w"></span>
<span class="linenos">136</span><span class="w">     </span><span class="nt">share_allergies</span><span class="p">:</span><span class="w"></span>
<span class="linenos">137</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">138</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">food_restriction</span><span class="w"></span>
<span class="linenos">139</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">140</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have to eat $food_restriction.</span><span class="w"></span>
<span class="linenos">141</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can only eat foods that are $food_restriction.</span><span class="w"></span>
<span class="linenos">142</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am allergic to any foods that are not $food_restriction.</span><span class="w"></span>
<span class="linenos">143</span><span class="w">     </span><span class="nt">share_all_outing_preferences</span><span class="p">:</span><span class="w"></span>
<span class="linenos">144</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">145</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">budget</span><span class="w"></span>
<span class="linenos">146</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outing_type</span><span class="w"></span>
<span class="linenos">147</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">148</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have a $budget budget and I would prefer a $outing_type atmosphere today.</span><span class="w"></span>
<span class="linenos">149</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am operating within a $budget budget and I want to go to a $outing_type place.</span><span class="w"></span>
<span class="linenos">150</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can do activities with a $budget budget and I want to find the most $outing_type place in the city.</span><span class="w"></span>
<span class="linenos">151</span><span class="w">     </span><span class="nt">share_budget</span><span class="p">:</span><span class="w"></span>
<span class="linenos">152</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">153</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">budget</span><span class="w"></span>
<span class="linenos">154</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">155</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have a $budget budget.</span><span class="w"></span>
<span class="linenos">156</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am operating within a $budget budget.</span><span class="w"></span>
<span class="linenos">157</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can do activities with a $budget budget.</span><span class="w"></span>
<span class="linenos">158</span><span class="w">     </span><span class="nt">share_outing_type</span><span class="p">:</span><span class="w"></span>
<span class="linenos">159</span><span class="w">       </span><span class="nt">entities</span><span class="p">:</span><span class="w"></span>
<span class="linenos">160</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outing_type</span><span class="w"></span>
<span class="linenos">161</span><span class="w">       </span><span class="nt">utterances</span><span class="p">:</span><span class="w"></span>
<span class="linenos">162</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I would prefer a $outing_type atmosphere today.</span><span class="w"></span>
<span class="linenos">163</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I want to go to a $outing_type place.</span><span class="w"></span>
<span class="linenos">164</span><span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is the most $outing_type place in the city?</span><span class="w"></span>
</pre></div>
</div>
<p><strong>NOTE</strong>: No intents can extract the exact same entities. Why?</p>
<ul class="simple">
<li><p>At every step in the conversation, we need to be able to know what information we have and don’t have.
Each intent’s <code class="docutils literal notranslate"><span class="pre">entities</span></code> indicates what information is gained when that intent is successfully extracted.
As a result, an intent will not be chosen unless all the entities were extracted.</p></li>
<li><p>As you will later see, each intent is mapped to an action outcome.
That means that we decide what path to take next in the conversation depending on what the intent is.</p></li>
<li><p>Having two or more intents that extract the same entities causes ambiguity in two ways.
First, it will likely be harder to extract the “correct” intent because the duplicate intents will be too similar to each other.
Second, there is functionally no reason for multiple intents to accomplish the exact same goal but map to different outcomes.
If you want to handle things differently depending on the extracted <em>value</em> of the entities, that is a separate process handled in the actions (to be seen later).</p></li>
</ul>
<p><strong>NOTE</strong>: All <code class="docutils literal notranslate"><span class="pre">utterances</span></code> must include <em>exactly</em> all the entities listed under <code class="docutils literal notranslate"><span class="pre">entities</span></code>; no more, no less.</p>
</section>
<section id="define-the-actions">
<h4>3. Define the Actions<a class="headerlink" href="#define-the-actions" title="Permalink to this heading"></a></h4>
</section>
</section>
<section id="deploy-the-bot-with-hovor">
<h3>Deploy the bot with HOVOR.<a class="headerlink" href="#deploy-the-bot-with-hovor" title="Permalink to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="generated/plan4dial.main.html" class="btn btn-neutral float-left" title="plan4dial.main" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Rebecca De Venezia @ QuMuLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
