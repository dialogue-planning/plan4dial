<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; Plan4Dial 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="plan4dial.main" href="generated/plan4dial.main.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Plan4Dial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="generated/plan4dial.html">plan4dial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements-local-install">Requirements - Local Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements-docker">Requirements - Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-steps">Usage Steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-yaml-config-file-that-defines-your-bot">Create a YAML config file that defines your bot.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#define-the-context-variables">1. Define the Context Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-the-intents">2. Define the Intents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-the-actions">3. Define the Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#generate-the-files-needed-to-test-the-bot-with-hovor">Generate the files needed to test the bot with HOVOR.</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Plan4Dial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial">
<span id="id1"></span><h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading"></a></h1>
<section id="requirements-local-install">
<h2>Requirements - Local Install<a class="headerlink" href="#requirements-local-install" title="Permalink to this heading"></a></h2>
<p><strong>Note: Currently, Plan4Dial only supports Linux/WSL due to the restrictions on the RBP planner.</strong>
<strong>Note: If Rasa is giving you issues running, check the latest releases. It may be your version of Python.</strong>.</p>
<div class="line-block">
<div class="line">For ease of use and reducing the chance of import or versioning errors, it is recommended that you use a virtual environment such as <code class="docutils literal notranslate"><span class="pre">venv</span></code>.</div>
<div class="line">Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code> to install the necessary libraries before using.</div>
<div class="line">Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">spacy</span> <span class="pre">download</span> <span class="pre">en_core_web_md</span></code> to download the appropriate Spacy model. This is used for NLU along with Rasa.</div>
</div>
</section>
<section id="requirements-docker">
<h2>Requirements - Docker<a class="headerlink" href="#requirements-docker" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">To ensure development works identically accross systems, Docker should be used to run Plan4Dial.</div>
<div class="line">Inside the repository, follow these steps to run with Docker:</div>
<div class="line">Retrieve a copy of the rbp.sif executable from Christian Muise (<a class="reference external" href="mailto:christian&#46;muise&#37;&#52;&#48;queensu&#46;ca">christian<span>&#46;</span>muise<span>&#64;</span>queensu<span>&#46;</span>ca</a>) and place this in the cloned repository.</div>
<div class="line">Build the docker image from Dockerfile: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">-t</span> <span class="pre">plan4dial:latest</span> <span class="pre">.</span></code></div>
<div class="line">Run a bash session inside a new docker container: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-it</span> <span class="pre">--name</span> <span class="pre">plan4dial</span> <span class="pre">--rm</span> <span class="pre">--volume</span> <span class="pre">$(pwd)/plan4dial:/root/app/plan4dial</span> <span class="pre">--net=host</span> <span class="pre">--privileged</span> <span class="pre">plan4dial:latest</span> <span class="pre">sh</span></code></div>
<div class="line">Run the command in the bash session: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">plan4dial/main.py</span> <span class="pre">gold_standard_bot</span></code></div>
<div class="line">Now you should see output files were created and successful output in the bash session in the container. You can copy these output files out from the filesystem outside the container, as the /plan4dial subdirectory is mounted.</div>
</div>
<p>Note: You can make changes to python files inside subfolder /plan4dial without rebuilding the docker container as it is mounted as as simple volume.</p>
</section>
<section id="usage-steps">
<h2>Usage Steps<a class="headerlink" href="#usage-steps" title="Permalink to this heading"></a></h2>
<section id="create-a-yaml-config-file-that-defines-your-bot">
<h3>Create a YAML config file that defines your bot.<a class="headerlink" href="#create-a-yaml-config-file-that-defines-your-bot" title="Permalink to this heading"></a></h3>
<p>Let’s go through an example. Suppose we want to create a chatbot that helps you decide what to do on your day off. This will be a fairly simple bot that picks a restaurant and outing location based on the user’s preferences.</p>
<p>(For later reference, the full YAML file as well as the output files can be found <a class="reference external" href="https://github.com/dialogue-planning/plan4dial/tree/main/plan4dial/local_data/gold_standard_bot">here</a>).</p>
<p>First, create a YAML file and pick a name for the domain:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">day-planner</span>
</pre></div>
</div>
<p>There are three main parts to the YAML file you will need to define.
They are <code class="docutils literal notranslate"><span class="pre">context</span> <span class="pre">variables</span></code>, <code class="docutils literal notranslate"><span class="pre">intents</span></code>, and <code class="docutils literal notranslate"><span class="pre">actions</span></code>. We will examine each of these in turn.</p>
<section id="define-the-context-variables">
<h4>1. Define the Context Variables<a class="headerlink" href="#define-the-context-variables" title="Permalink to this heading"></a></h4>
<p>Context variables are variables that your bot will store throughout the course of the conversation to keep track of the context gathered so far.
Without context variables, the bot would not be able to store information from one line of dialogue to the next.</p>
<p>One of the most common use cases of context variables is to store information gathered from the user.
However, they can also be used internally to keep track of states in the conversation, the most common example being an indication of when the “goal” is reached.</p>
<p>In this case, we know we want to keep track of the user’s information and preferences, which include their location, phone number, cuisine, allergy/food restrictions, budget, and outing type.
Let’s examine the context variables for location, phone number, cuisine, and food restrictions first.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">context_variables</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># user&#39;s location</span>
<span class="w">  </span><span class="nt">location</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">    </span><span class="nt">extraction</span><span class="p">:</span>
<span class="w">      </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spacy</span>
<span class="w">      </span><span class="nt">config_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpe</span>
<span class="w">    </span><span class="nt">known</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span>
<span class="w">      </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">options</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Toronto</span><span class="p">:</span>
<span class="w">        </span><span class="nt">variations</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">downtown</span>
<span class="w">      </span><span class="nt">Kingston</span><span class="p">:</span>
<span class="w">        </span><span class="nt">variations</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k-town</span>
<span class="w">  </span><span class="c1"># user&#39;s phone number</span>
<span class="w">  </span><span class="nt">phone_number</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">    </span><span class="nt">extraction</span><span class="p">:</span>
<span class="w">      </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">regex</span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\d{10}</span>
<span class="w">    </span><span class="nt">known</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span>
<span class="w">      </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">examples</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1234567890</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2345678901</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3453452794</span>
<span class="w">  </span><span class="c1"># user&#39;s preferred cuisine; must map to one of the 4 options</span>
<span class="w">  </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">known</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span>
<span class="w">      </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">options</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mexican</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Italian</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Chinese</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dessert</span>
<span class="w">  </span><span class="c1"># indicates if the user has an allergy</span>
<span class="w">  </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">known</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">      </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># food restrictions/allergies that the bot can take into account</span>
<span class="w">  </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">known</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">      </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">options</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dairy-free</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gluten-free</span>
</pre></div>
</div>
<p>We can see that each context variable has been assigned a type: <code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">enum</span></code>, and <code class="docutils literal notranslate"><span class="pre">flag</span></code> respectively. We can also see that another type, <code class="docutils literal notranslate"><span class="pre">fflag</span></code>, exists under the <code class="docutils literal notranslate"><span class="pre">known</span></code> section of <em>cuisine</em> (more on this later).</p>
<p>These are the only <strong>four</strong> types that we can define in the YAML. They are defined as follows:</p>
<table class="docutils align-default" id="variable-types">
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flag</p></td>
<td><p>A boolean value; can only be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>fflag</p></td>
<td><p>“Fuzzy flag”; can only be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, or <code class="docutils literal notranslate"><span class="pre">maybe</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>enum</p></td>
<td><p>Can only be set to the values set under the <code class="docutils literal notranslate"><span class="pre">options</span></code> list.</p></td>
</tr>
<tr class="row-odd"><td><p>json</p></td>
<td><p>Used if you want to use an alternate extraction method.</p>
<p><strong>NOTE</strong>: Currently, only Spacy and regexes are compatible with
this option. For Spacy, you can optionally add an <code class="docutils literal notranslate"><span class="pre">options</span></code> list
which will force that only the listed options are valid
extractions. For regex, the <code class="docutils literal notranslate"><span class="pre">examples</span></code> list is necessary so Rasa
can capture training examples properly.</p>
</td>
</tr>
</tbody>
</table>
<p>So, “location” is of type <code class="docutils literal notranslate"><span class="pre">json</span></code> because we want to use <a class="reference external" href="https://spacy.io/usage/spacy-101#annotations-ner">Spacy GPE</a> for location extraction. (In the case of location, it makes the most sense to use a model finely tuned to detect location, instead of Rasa, which is trained only on the examples you provide).
You can see that under <code class="docutils literal notranslate"><span class="pre">extraction</span></code>, we specified both the method <code class="docutils literal notranslate"><span class="pre">spacy</span></code> and the configuration for NER (named entity recognition), in this case <cite>gpe</cite> for location.
Note that since we specified cities under “options”, only those extracted location would be viable.
However, if we left those out, any city the user entered would be valid.</p>
<p>We can see that the context variable for “phone_number” is configured similarly, although this one uses a simple <code class="docutils literal notranslate"><span class="pre">regex</span></code>, where the pattern is specified under <code class="docutils literal notranslate"><span class="pre">pattern</span></code>.
Note that we still supply a few <code class="docutils literal notranslate"><span class="pre">examples</span></code> for Rasa’s training process.</p>
<p><em>cuisine</em> is of type <code class="docutils literal notranslate"><span class="pre">enum</span></code> because we only want it to have 4 valid values: <em>Mexican</em>, <em>Italian</em>, <em>Chinese</em>, and <em>dessert</em>. <em>food_restriction</em> is of type <code class="docutils literal notranslate"><span class="pre">enum</span></code> for the same reason.</p>
<p><em>have_allergy</em>, which determines if the user has an allergy (in which case we need to get their <em>food_restriction</em>), is of type <code class="docutils literal notranslate"><span class="pre">flag</span></code>. That is, they either do or don’t have an allergy. For this variable, you can also see that it has an <code class="docutils literal notranslate"><span class="pre">init</span></code> option. This is only available to <code class="docutils literal notranslate"><span class="pre">flag</span></code> or <code class="docutils literal notranslate"><span class="pre">fflag</span></code> type variables, and it allows you to set an initial value for the variable and change the initial state of the conversation. In this case, we default the variable to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p id="known">Each variable also has a <code class="docutils literal notranslate"><span class="pre">known</span></code> option which determines the knowledge we have about the variable.
The <code class="docutils literal notranslate"><span class="pre">known</span></code> <code class="docutils literal notranslate"><span class="pre">type</span></code> can only be set to either <code class="docutils literal notranslate"><span class="pre">flag</span></code> or <code class="docutils literal notranslate"><span class="pre">fflag</span></code>, and functions in the same way.
This parameter is extermely important as conversation navigation is often predicated on what context we know, maybe know, or don’t know so far.</p>
<p>In most cases, the <code class="docutils literal notranslate"><span class="pre">known</span></code>’s <code class="docutils literal notranslate"><span class="pre">init</span></code> setting is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, but the <code class="docutils literal notranslate"><span class="pre">type</span></code> setting depends on what makes the most sense for the variable.
Often in the case of <code class="docutils literal notranslate"><span class="pre">enum</span></code> type variables like <em>cuisine</em>, it makes the most sense to allow for a little variance in user input.
They may something that somewhat resembles one of the available options, and it is helpful to store their answer, classify it as “maybe known”, and clarify the user’s intention.
For simpler variables like <em>have_allergy</em>, a <code class="docutils literal notranslate"><span class="pre">known</span></code> <code class="docutils literal notranslate"><span class="pre">type</span></code> setting of <code class="docutils literal notranslate"><span class="pre">flag</span></code> should suffice.</p>
<p>With this in mind, let’s add the rest of the context variables.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># possible budget options</span>
<span class="nt">budget</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">low</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">high</span>
<span class="c1"># user&#39;s outing preferences</span>
<span class="nt">outing_type</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fflag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<span class="w">    </span><span class="nt">high-energy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">variations</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fun</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exciting</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">social</span>
<span class="w">    </span><span class="nt">low-energy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">variations</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chill</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relaxing</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">laid-back</span>
<span class="c1"># activated if there is a conflict between the user&#39;s cuisine preference and food restrictions</span>
<span class="nt">conflict</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">  </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="c1"># possible restaurant options</span>
<span class="nt">restaurant</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Guac Grill</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Alfredo&#39;s Pizza Café</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mandarin</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Geneva Crepes</span>
<span class="c1"># possible outing options</span>
<span class="nt">outing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stages</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stauffer Library</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Broadway Theater</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Smith&#39;s Golfing Club</span>
<span class="c1"># ends the conversation if true</span>
<span class="nt">goal</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">  </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">known</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flag</span>
<span class="w">    </span><span class="nt">init</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>While most of this you’ve already seen, let’s draw attention to a couple things.</p>
<p>In <em>outing_type</em>, we’ve supplied some <code class="docutils literal notranslate"><span class="pre">variations</span></code> under the <code class="docutils literal notranslate"><span class="pre">options</span></code> the user can provide.
These indicate that if the user utters any of the variations, the bot will <strong>map the user’s utterance back to the original option</strong>.
While I’ve only given a few examples for simplicity, it is extremely important to supply lots of training examples to make your model more robust.
There is an exception to this rule, though. In the case of <em>outing</em>, although the variable is of <code class="docutils literal notranslate"><span class="pre">type</span></code> <code class="docutils literal notranslate"><span class="pre">enum</span></code>, the variable value will be set internally based on the user’s preferences instead of through directly analyzing the user’s input.
Since this will be completely in the control of the bot designer and not reliant on the NLU, no variations need to be provided there.</p>
<p>Also, a <code class="docutils literal notranslate"><span class="pre">flag</span></code> <em>goal</em> variable is mandatory for every bot as it determines when the conversation ends.
When you want the outcome of an action to end the conversation, you should set <strong>goal</strong> to <strong>true</strong>.</p>
<p>You’re all set to define context variables for your bot! Let’s move on to the next step: intents.</p>
</section>
<section id="define-the-intents">
<h4>2. Define the Intents<a class="headerlink" href="#define-the-intents" title="Permalink to this heading"></a></h4>
<p>The next step is to define the intents.
Intents are characterizations of what the user is trying to say. For example, if the user says “yes”, then their intent is to “confirm” the bot’s statement.
Intents are parsed/analyzed using Rasa NLU.
They are important as we need to be able to map arbitrary user input to tangible results that determines where to go next in the conversation.
<strong>NOTE</strong>: We do not use Rasa for anything other than off-the-shelf NLU, to reduce dependency on the system.</p>
<p>An intent is made up these parts:</p>
<p>1. <strong>utterances</strong>: Examples of utterances that constitute that intent.
Similar to context variable <code class="docutils literal notranslate"><span class="pre">variations</span></code>, it is best to supply as many of these as you can, as these will be passed off to Rasa as training examples.
Ideally, you shouldn’t have intents with utterances that are too similar to one another, as this will make it harder for the model to pinpoint what the user wants.</p>
<p>2. <strong>entities</strong>: (Optional) Any entities that are extracted with this intent.
Entities are variables that are extracted from the user.
Within the intent, each entity must be preceded with a <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol to indicate the location of the entity in the utterance.</p>
<p>Let’s see what the intents for our <code class="docutils literal notranslate"><span class="pre">day-planner</span></code> bot look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">intents</span><span class="p">:</span>
<span class="w">  </span><span class="nt">confirm</span><span class="p">:</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;yes&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yeah</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">that&#39;s it</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Y&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mhm</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confirm</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes please</span>
<span class="w">  </span><span class="nt">deny</span><span class="p">:</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;no&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not at all</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">that&#39;s not what i meant</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absolutely not</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">i don&#39;t want that</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nah</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no thanks</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no thank you</span>
<span class="w">  </span><span class="nt">share_phone_number</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">phone_number</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My phone number is $phone_number.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My number is $phone_number.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$phone_number</span>
<span class="w">  </span><span class="nt">share_location</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">location</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I live in $location.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am located in $location.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Can you help me find things to do in $location?</span>
<span class="w">  </span><span class="nt">share_cuisine</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cuisine</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I want to eat $cuisine.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Do you have restaurants of type $cuisine?</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Are there any $cuisine restaurants in the area?</span>
<span class="w">  </span><span class="nt">share_allergies</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">food_restriction</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have to eat $food_restriction.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can only eat foods that are $food_restriction.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am allergic to any foods that are not $food_restriction.</span>
<span class="w">  </span><span class="nt">share_all_outing_preferences</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">budget</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outing_type</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have a $budget budget and I would prefer a $outing_type atmosphere today.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am operating within a $budget budget and I want to go to a $outing_type place.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can do activities with a $budget budget and I want to find the most $outing_type place in the city.</span>
<span class="w">  </span><span class="nt">share_budget</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">budget</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I have a $budget budget.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I am operating within a $budget budget.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I can do activities with a $budget budget.</span>
<span class="w">  </span><span class="nt">share_outing_type</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outing_type</span>
<span class="w">    </span><span class="nt">utterances</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I would prefer a $outing_type atmosphere today.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I want to go to a $outing_type place.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is the most $outing_type place in the city?</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: All <code class="docutils literal notranslate"><span class="pre">utterances</span></code> must include <em>exactly</em> all the entities listed under <code class="docutils literal notranslate"><span class="pre">entities</span></code>; no more, no less.
In practice, this does not mean that all entities will actually be extracted at runtime, but it needs to be indicated
what the intent is actually trying to accomplish.</p>
</section>
<section id="define-the-actions">
<h4>3. Define the Actions<a class="headerlink" href="#define-the-actions" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">actions</span></code> are the core of dialogue agent design as they specify what your agent can do and when.
We use a <strong>declarative</strong> specification powered by automated planning that allows you to treat actions as separate pieces of a puzzle.
You won’t have to draw out complex dialogue trees that you will have to completely dismantle if you decide late in the game that you want to add a new action near the top.
Instead, actions are chosen based on what is true in the state of the world.
Only actions whose <code class="docutils literal notranslate"><span class="pre">preconditions</span></code> are satisfied are executed.</p>
<p>It is important to reiterate that <code class="docutils literal notranslate"><span class="pre">actions</span></code> refer only to the actions that the dialogue agent can take, and that chatbot creation is seen primarily through the lens of the agent’s perspective.
User utterances are only handled by deciphering <code class="docutils literal notranslate"><span class="pre">intents</span></code> as described above.</p>
<p>There are <strong>four</strong> types of actions:</p>
<table class="docutils align-default" id="action-types">
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dialogue</p></td>
<td><p>Actions where the agent utters something to the user.</p>
<p>Often the user’s intent is extracted, which is then used to
determine the outcome.</p>
<p>However, the agent can also utter a message without taking any
user input.</p>
<p>This happens if you only specify a single outcome for a dialogue
action as the agent knows it will end up in the same place
regardless of what the user says, and so skips getting input
entirely.</p>
</td>
</tr>
<tr class="row-odd"><td><p>system</p></td>
<td><p>Actions that are completely internal the agent, usually changing
the value of some context variable based on logic.</p></td>
</tr>
<tr class="row-even"><td><p>api</p></td>
<td><p>Actions that make API calls, the status of which determines the
outcome.</p>
<p><strong>NOTE</strong>: Still in development.</p>
</td>
</tr>
<tr class="row-odd"><td><p>custom</p></td>
<td><p>Custom actions created by you, the bot designer.
These allow you to create action templates which speeds up action
creation.</p>
<p>These are written in Python and stored under
<code class="docutils literal notranslate"><span class="pre">plan4dial/for_generating/custom_actions</span></code>.</p>
<p><a class="reference internal" href="generated/plan4dial.for_generating.custom_actions.slot_fill.html#plan4dial.for_generating.custom_actions.slot_fill.slot_fill" title="plan4dial.for_generating.custom_actions.slot_fill.slot_fill"><code class="xref py py-func docutils literal notranslate"><span class="pre">slot_fill</span></code></a>
is a useful example available for use.</p>
<p>These action will end up being one of the above types, but can be
configured in a custom way.</p>
</td>
</tr>
</tbody>
</table>
<p>There is also an important subtype you should know.</p>
<p>The <strong>Context dependent determination</strong> subtype can only be applied to system actions.
Using this subtype indicates that you are going to have mini if-elif statements (called contexts) that determine which outcome is executed.
This is different than “vanilla”/non-subtyped system actions which don’t check any context when activated and execute the single outcome.</p>
<p>A <strong>context</strong> is one (or multiple) settings to context variables.
For example, some outcome A could depend on  <em>location</em> being “Toronto”,
while outcome B could depend on <em>time</em> being “12 pm”.</p>
<p>We will see examples of every type (other than api) and subtype in our <code class="docutils literal notranslate"><span class="pre">day-planner</span></code> example.</p>
<p>Let’s start by examining a simple <a class="reference internal" href="#action-types"><span class="std std-ref">dialogue action</span></a>.
We’ll create an action <code class="docutils literal notranslate"><span class="pre">get-have-allergy</span></code> that asks the user if they have an allergy or not, which expects a simple yes/no response.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">actions</span><span class="p">:</span>
<span class="w">  </span><span class="nt">get-have-allergy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dialogue</span>
<span class="w">    </span><span class="nt">message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Do you have any allergies? (Y/N)</span>
<span class="w">    </span><span class="nt">condition</span><span class="p">:</span>
<span class="w">      </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">        </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">effect</span><span class="p">:</span>
<span class="w">      </span><span class="nt">set-allergy</span><span class="p">:</span>
<span class="w">        </span><span class="nt">oneof</span><span class="p">:</span>
<span class="w">          </span><span class="nt">outcomes</span><span class="p">:</span>
<span class="w">            </span><span class="nt">indicate_allergy</span><span class="p">:</span>
<span class="w">              </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">                </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                  </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">              </span><span class="nt">intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confirm</span>
<span class="w">              </span><span class="nt">follow_up</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-allergy</span>
<span class="w">            </span><span class="nt">indicate_no_allergy</span><span class="p">:</span>
<span class="w">              </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">                </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">                </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                  </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">              </span><span class="nt">intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>We can see that actions take a number of parameters, including <code class="docutils literal notranslate"><span class="pre">type</span></code> as discussed above.</p>
<p><code class="docutils literal notranslate"><span class="pre">message_variants</span></code> are messages that the agent can utter when this action takes place.
This parameter can only be supplied for dialogue actions.
You can supply as many messages as you want, and one will be randomly selected at runtime.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">condition</span></code> is what you would think of as a “precondition” in automated planning.
Whatever you supply in the <code class="docutils literal notranslate"><span class="pre">condition</span></code> is what must be true for the action to take place.
This offers a lot more flexibility than determining a hard-coded sequence of actions through a dialogue tree
as you don’t need to know all the details about where exactly in the conversation the action takes place,
you only need to know in what states it’s allowed to trigger.
This also allows for inserting new actions at any point in development with ease.</p>
<p>In this case, the only condition is that we don’t know if the user has an allergy or not yet.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">effect</span></code> is what occurs when the action takes place.
It consists of a name (in this case <code class="docutils literal notranslate"><span class="pre">set-allergy</span></code>), followed by <code class="docutils literal notranslate"><span class="pre">oneof</span></code> and a list of <code class="docutils literal notranslate"><span class="pre">outcomes</span></code>.
As the names suggest, only one of the outcomes will be executed depending on the factors at play.</p>
<p>Each outcome also consists of a name, in this case <code class="docutils literal notranslate"><span class="pre">indicate_allergy</span></code> and <code class="docutils literal notranslate"><span class="pre">indicate_no_allergy</span></code>.</p>
<p>There are <strong>four</strong> different parameters that outcomes can take.
Outcomes can use multiple and need at least one.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>parameters</p></th>
<th class="head"><p>definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>updates</p></td>
<td><p>Used in practically every outcome.
Here you define the changing <code class="docutils literal notranslate"><span class="pre">value</span></code> s of context variables.</p>
<p>You also define how the <code class="docutils literal notranslate"><span class="pre">known</span></code> status of each variable has updated.</p>
<p>This is <strong>extremely important</strong> to do correctly as “knowing what you
know” is a huge part of conversation navigation!</p>
<p><strong>NOTE</strong> if you want to set the variable to the value taken from the
user, precede the variable name with <code class="docutils literal notranslate"><span class="pre">$</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>intent</p></td>
<td><p>Used for dialogue actions with &gt; 1 outcome,
where the user’s input will be disambiguated.</p>
<p>By specifying the intent, you are indicating that this outcome will be
the course of action taken when the user’s input matches that intent.</p>
</td>
</tr>
<tr class="row-even"><td><p>follow_up</p></td>
<td><p>Forces a particular action to “follow up” this outcome.</p>
<p>This is meant to be situational and not used for every single action,
in which case you are essentially building a dialogue tree.</p>
</td>
</tr>
<tr class="row-odd"><td><p>response_variants</p></td>
<td><p>A response, or message, that the bot will utter <em>after</em> the action has
been executed.</p>
<p>Any one of the variants will be picked at random at runtime.</p>
</td>
</tr>
<tr class="row-even"><td><p>context</p></td>
<td><p>Only used in actions with type <code class="docutils literal notranslate"><span class="pre">system</span></code> and subtype
<strong>Context dependent determination</strong>.</p>
<p>Specifies what context must be true in order for the outcome to take
place.</p>
</td>
</tr>
</tbody>
</table>
<p>With this in mind, we can see that the outcome <code class="docutils literal notranslate"><span class="pre">indicate_allergy</span></code> is triggered when the user answers with <code class="docutils literal notranslate"><span class="pre">confirm</span></code>.
The <code class="docutils literal notranslate"><span class="pre">updates</span></code> indicate that <code class="docutils literal notranslate"><span class="pre">have_allergy</span></code> is set to a value of <code class="docutils literal notranslate"><span class="pre">true</span></code> and is now <code class="docutils literal notranslate"><span class="pre">known</span></code>.
We also force a <code class="docutils literal notranslate"><span class="pre">follow_up</span></code> where we try to determine what the user’s allergy is.</p>
<p>In the outcome <code class="docutils literal notranslate"><span class="pre">indicate_no_allergy</span></code>, we can see that <code class="docutils literal notranslate"><span class="pre">conflict</span></code> is set to a value of false.
This is because we know that if the user has no allergies, we will never come across a conflict between their allergies and their chosen cuisine.</p>
<p>Next, let’s take a look at the actions that actually extract information from the user.</p>
<p><code class="docutils literal notranslate"><span class="pre">get_outing</span></code>, the action where we try to extract both the user’s budget and preference of outing, is the most comprehensive example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">get_outing</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">  </span><span class="nt">subtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slot_fill</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">action_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_outing</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">budget</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outing_type</span>
<span class="w">    </span><span class="nt">overall_intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">share_all_outing_preferences</span>
<span class="w">    </span><span class="nt">message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What kind of outing would you like to go to? Please specify both your budget (high or low) and the type of atmosphere you&#39;re looking for (i.e. fun, relaxing, etc.)</span>
<span class="w">    </span><span class="nt">fallback_message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, that isn&#39;t a valid outing preference.</span>
<span class="w">    </span><span class="nt">config_entities</span><span class="p">:</span>
<span class="w">      </span><span class="nt">budget</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fallback_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, that isn&#39;t a valid budget option. Please select either high or low.</span>
<span class="w">        </span><span class="nt">single_slot_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is your budget preference? Please select either high or low.</span>
<span class="w">        </span><span class="nt">single_slot_intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">share_budget</span>
<span class="w">      </span><span class="nt">outing_type</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fallback_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, that isn&#39;t a valid outing type.</span>
<span class="w">        </span><span class="nt">single_slot_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is your preferred outing type? Use a descriptive adjective like fun, high-energy, relaxing, etc.</span>
<span class="w">        </span><span class="nt">single_slot_intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">share_outing_type</span>
<span class="w">        </span><span class="nt">clarify_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, I wasn&#39;t quite sure about your outing type preference. Did you want a(n) $outing_type atmosphere?</span>
<span class="w">    </span><span class="nt">additional_updates</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">outcome</span><span class="p">:</span>
<span class="w">          </span><span class="nt">budget</span><span class="p">:</span>
<span class="w">            </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">response_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ok, I&#39;ll take that into account.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">outcome</span><span class="p">:</span>
<span class="w">          </span><span class="nt">outing_type</span><span class="p">:</span>
<span class="w">            </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">response_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Great choice!</span>
</pre></div>
</div>
<p>We can see that this action is configured quite differently than the rest -
this is because it is a <a class="reference internal" href="#action-types"><span class="std std-ref">custom action</span></a>.</p>
<p>In this case, the action is built from the <a class="reference internal" href="generated/plan4dial.for_generating.custom_actions.slot_fill.html#plan4dial.for_generating.custom_actions.slot_fill.slot_fill" title="plan4dial.for_generating.custom_actions.slot_fill.slot_fill"><code class="xref py py-func docutils literal notranslate"><span class="pre">slot_fill</span></code></a>
template, which is provided by default in Plan4Dial.
This template allows you to extract any number of entities, and even accounts for all the possible combinations of certainties –
i.e. budget is <code class="docutils literal notranslate"><span class="pre">known</span></code> and outing_type is <code class="docutils literal notranslate"><span class="pre">maybe</span></code> <code class="docutils literal notranslate"><span class="pre">known</span></code>, vice versa, etc.</p>
<p>If you go to the source code of the function, you’ll see that the parameters of the custom action are provided under <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
of <code class="docutils literal notranslate"><span class="pre">get_outing</span></code>. A full explanation of what each parameter is can be seen in the documentation for <a class="reference internal" href="generated/plan4dial.for_generating.custom_actions.slot_fill.html#plan4dial.for_generating.custom_actions.slot_fill.slot_fill" title="plan4dial.for_generating.custom_actions.slot_fill.slot_fill"><code class="xref py py-func docutils literal notranslate"><span class="pre">slot_fill</span></code></a>.</p>
<p>The values for location and cuisine are extracted with the same custom action:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">get-location</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">  </span><span class="nt">subtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slot_fill</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">action_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-location</span>
<span class="w">    </span><span class="nt">overall_intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">share_location</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">location</span>
<span class="w">    </span><span class="nt">message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Where are you located?</span>
<span class="w">    </span><span class="nt">fallback_message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, that isn&#39;t a valid location.</span>
<span class="w">    </span><span class="nt">additional_updates</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">outcome</span><span class="p">:</span>
<span class="w">          </span><span class="nt">location</span><span class="p">:</span>
<span class="w">            </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">response_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Tailoring your results to what&#39;s available in $location...</span>
<span class="nt">get-cuisine</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">  </span><span class="nt">subtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slot_fill</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">action_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-cuisine</span>
<span class="w">    </span><span class="nt">entities</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cuisine</span>
<span class="w">    </span><span class="nt">overall_intent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">share_cuisine</span>
<span class="w">    </span><span class="nt">message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">What is your cuisine of choice? Mexican, Italian, Chinese, and dessert restaurants are in the area.</span>
<span class="w">    </span><span class="nt">fallback_message_variants</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, that isn&#39;t a valid cuisine.</span>
<span class="w">    </span><span class="nt">config_entities</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">        </span><span class="nt">clarify_message_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I didn&#39;t quite get your cuisine preference. Do you want to eat $cuisine?</span>
<span class="w">    </span><span class="nt">additional_updates</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">outcome</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">            </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">response_variants</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cuisine preference has been logged.</span>
</pre></div>
</div>
<p>Next, let’s take a look at a simple <a class="reference internal" href="#action-types"><span class="std std-ref">system action</span></a> our bot will use.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">reset-preferences</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">system</span>
<span class="w">  </span><span class="nt">condition</span><span class="p">:</span>
<span class="w">    </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">effect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">reset</span><span class="p">:</span>
<span class="w">      </span><span class="nt">oneof</span><span class="p">:</span>
<span class="w">        </span><span class="nt">outcomes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">reset-values</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">              </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">            </span><span class="nt">response_variants</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sorry, but there are no restaurants that match your allergy and cuisine preferences. Try entering a different set of preferences.</span>
</pre></div>
</div>
<p>We can see that a <a class="reference internal" href="#action-types"><span class="std std-ref">system action</span></a> is only concerned with changing the values of some context variables given that a given state is true.</p>
<p>The purpose of this action in particular is to reset the user’s inputs for allergies/food restriction as well as cuisine choice and the conflict flag when a conflict has been detected.
The response variants indicate what the bot will tell the user after it performed the action.</p>
<p>Note that since this is a “vanilla” system action, we have only specified one outcome, so the execution of this action is deterministic.
We will now see an example where the special subtype of system action uses multiple outcomes.</p>
<p>Let’s take a look at the action <code class="docutils literal notranslate"><span class="pre">check-conflicts</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">check-conflicts</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">system</span>
<span class="w">  </span><span class="nt">subtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Context dependent determination</span>
<span class="w">  </span><span class="nt">condition</span><span class="p">:</span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">have_allergy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">      </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">effect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">check-conflicts</span><span class="p">:</span>
<span class="w">      </span><span class="nt">oneof</span><span class="p">:</span>
<span class="w">        </span><span class="nt">outcomes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">restriction-dessert</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dessert</span>
<span class="w">              </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dairy-free</span>
<span class="w">          </span><span class="nt">restriction-mexican</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mexican</span>
<span class="w">              </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gluten-free</span>
<span class="w">          </span><span class="nt">no-restriction-1</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Italian</span>
<span class="w">          </span><span class="nt">no-restriction-2</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Chinese</span>
<span class="w">          </span><span class="nt">no-restriction-3</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dessert</span>
<span class="w">              </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gluten-free</span>
<span class="w">          </span><span class="nt">no-restriction-4</span><span class="p">:</span>
<span class="w">            </span><span class="nt">updates</span><span class="p">:</span>
<span class="w">              </span><span class="nt">conflict</span><span class="p">:</span>
<span class="w">                </span><span class="nt">known</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">            </span><span class="nt">context</span><span class="p">:</span>
<span class="w">              </span><span class="nt">cuisine</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mexican</span>
<span class="w">              </span><span class="nt">food_restriction</span><span class="p">:</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dairy-free</span>
</pre></div>
</div>
<p>For the sake of making a good example, we have arbitrarily decided that there are two possible conflicts with the user’s choices:
there are no gluten-free Mexican restaurants or dairy-free dessert places in the area.
With this in mind, we need to check if there’s a conflict with the user’s responses.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">precondition</span></code> of <code class="docutils literal notranslate"><span class="pre">check-conflicts</span></code> ensures we’ve gathered all the information on location, food restrictions, and cuisine that the user specified.
It also ensures that we don’t know the conflict yet (so we don’t loop back on the same action).</p>
<p>Unlike the first <a class="reference internal" href="#action-types"><span class="std std-ref">system action</span></a> example, this action has multiple outcomes.
But without any input from the user (which is only taken in <a class="reference internal" href="#action-types"><span class="std std-ref">dialogue action</span></a>),
how will the outcome be chosen? The answer lies in the <code class="docutils literal notranslate"><span class="pre">context</span></code> provided in each outcome.</p>
<p>When this type of action is executed, the outcome determiner will run through each outcome and select the one whose <code class="docutils literal notranslate"><span class="pre">context</span></code> setting is a <em>subset of the current state of the world</em>.</p>
<p>In this case, that means setting the value to <code class="docutils literal notranslate"><span class="pre">conflict</span></code> depending on what combination of input the user entered previously.</p>
<p><strong>NOTE</strong>: This specification will become shorter and cleaner with the closing of <a class="reference external" href="https://github.com/dialogue-planning/plan4dial/issues/4">#4</a>.</p>
<p><strong>And that’s all the action types!</strong> Now you have every piece of the puzzle you need to specify your bot.
There are a few actions we didn’t cover, but they are all more examples of the above.</p>
</section>
</section>
<section id="generate-the-files-needed-to-test-the-bot-with-hovor">
<h3>Generate the files needed to test the bot with HOVOR.<a class="headerlink" href="#generate-the-files-needed-to-test-the-bot-with-hovor" title="Permalink to this heading"></a></h3>
<p>Once you are satisfied with your specification, call <a class="reference internal" href="generated/plan4dial.main.html#plan4dial.main.generate_files" title="plan4dial.main.generate_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">generate_files</span></code></a>.</p>
<p>Then, clone <a class="reference external" href="https://github.com/dialogue-planning/contingent-plan-executor/tree/main">our extension of IBM’s Hovor</a>.</p>
<p>See the Hovor README for a rundown on the different ways to run and deploy your chatbot.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="generated/plan4dial.main.html" class="btn btn-neutral float-left" title="plan4dial.main" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Rebecca De Venezia @ QuMuLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>